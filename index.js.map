{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function gettingData(inputSearch, pageGrowth = 1) {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: '46020847-b0dc78394505c5145868b7f5c',\n        q: inputSearch,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: pageGrowth,\n        per_page: 15,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    return error;\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport const renderData = dataImgArr => {\n  const gallery = document.querySelector('.gallery');\n\n  if (dataImgArr.length === 0) {\n    iziToast.show({\n      message:\n        'Sorry, there are no images matching <br> your search query. Please try again!',\n      messageColor: '#000',\n      messageSize: '18px',\n      messageLineHeight: '20px',\n      backgroundColor: 'rgb(255,153,102)',\n      position: 'topRight',\n      imageWidth: 30,\n    });\n    return;\n  }\n\n  const markup = dataImgArr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-list-item\">\n                    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                        <img class=\"img\" src=\"${webformatURL}\" \n                        alt=\"${tags}\" \n                        title=\"${tags}\" />\n                    </a>\n                    <ul class=\"data-list\">\n                        <li class=\"data-item\">\n                            <p class=\"data-item-name\">Likes</p>\n                            <p class=\"data-numbers\">${likes}</p>\n                        </li>\n                        <li class=\"data-item\">\n                            <p class=\"data-item-name\">Views</p>\n                            <p class=\"data-numbers\">${views}</p>\n                        </li>\n                        <li class=\"data-item\">\n                            <p class=\"data-item-name\">Comments</p>\n                            <p class=\"data-numbers\">${comments}</p>\n                        </li>\n                        <li class=\"data-item\">\n                            <p class=\"data-item-name\">Downloads</p>\n                            <p class=\"data-numbers\">${downloads}</p>\n                        </li>\n                    </ul> \n          </li>`;\n      }\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n};\n\nexport const galleryClear = () => {\n  document.querySelector('.gallery').innerHTML = '';\n};\n\nexport const loaderShow = () => {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.style.display = 'block';\n  }\n};\n\nexport const loaderHide = () => {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.style.display = 'none';\n  }\n};\n\nexport const loaderMore = () => {\n  const loaderMoreBtn = document.querySelector('.loader-more');\n  loaderMoreBtn.style.display = 'block';\n};\n\nexport const loaderMoreHide = () => {\n  const loaderMoreBtn = document.querySelector('.loader-more');\n  loaderMoreBtn.style.display = 'none';\n};\n\nexport const showMessage = () => {\n  iziToast.show({\n    message: \"We're sorry, but you've reached the end of search results.\",\n    messageColor: '#000',\n    messageSize: '18px',\n    messageLineHeight: '20px',\n    backgroundColor: 'rgb(37, 150, 190)',\n    position: 'topRight',\n    timeout: 5000,\n  });\n};\n","import { gettingData } from './js/pixabay-api.js';\nimport {\n  renderData,\n  galleryClear,\n  loaderShow,\n  loaderHide,\n  loaderMore,\n  loaderMoreHide,\n  showMessage,\n} from './js/render-functions.js';\n\nconst formFetch = document.querySelector('.formFetchEl');\nconst btnMorePosts = document.createElement('button');\nbtnMorePosts.classList.add('loader-more');\nbtnMorePosts.textContent = 'Load more';\nbtnMorePosts.style.display = 'none';\ndocument.body.appendChild(btnMorePosts);\n\nlet inputSearch = '';\nlet pageGrowth = 1;\nlet totalHits = 0;\n\nformFetch.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  inputSearch = document.querySelector('input[name=\"search\"]').value.trim();\n  pageGrowth = 1;\n  if (!inputSearch) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Search query cannot be empty.',\n    });\n    return;\n  }\n\n  galleryClear();\n  loaderMoreHide();\n\n  try {\n    loaderShow();\n    const data = await gettingData(inputSearch, pageGrowth);\n    totalHits = data.totalHits;\n\n    if (data.hits.length > 0) {\n      renderData(data.hits);\n      loaderMore();\n    }\n\n    if (data.hits.length < 15 || pageGrowth * 15 >= totalHits) {\n      loaderMoreHide();\n      showMessage();\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n  } finally {\n    loaderHide();\n  }\n});\n\nbtnMorePosts.addEventListener('click', async () => {\n  pageGrowth++;\n\n  try {\n    loaderShow();\n    const data = await gettingData(inputSearch, pageGrowth);\n    renderData(data.hits);\n\n    if (pageGrowth * 15 >= totalHits) {\n      loaderMoreHide();\n      showMessage();\n    }\n\n    const gallery = document.querySelector('.gallery');\n    const { height: cardHeight } =\n      gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching <br> your search query. Please try again!',\n    });\n  } finally {\n    loaderHide();\n  }\n});\n"],"names":["gettingData","inputSearch","pageGrowth","axios","error","lightbox","SimpleLightbox","renderData","dataImgArr","gallery","iziToast","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","galleryClear","loaderShow","loader","loaderHide","loaderMore","loaderMoreBtn","loaderMoreHide","showMessage","formFetch","btnMorePosts","totalHits","event","data","cardHeight"],"mappings":"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"}